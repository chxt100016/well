<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"> 

<mapper namespace="org.wella.houtai.jygl.mapper.HoutaiJyglUserMoneyInfoMapper">
  	<!-- select -->
  	<!-- 交易详细目录获得函数 -->
	<select id = "getJyDetailList" parameterType="java.util.Map" resultType = "java.util.Map">
	    SELECT IF(b.user_name  IS NULL , c.adminName , b.user_name) AS userName , a.*
		FROM wa_user_money_info a 
		LEFT JOIN wa_user b  ON a.mgr_user_id = b.user_id 
		LEFT JOIN wa_admin c ON a.mgr_admin_id = c.id
		<where>
			<if test = "moneyId != null">
				AND money_id = #{moneyId}		
			</if>
		</where>	
	</select>
</mapper>