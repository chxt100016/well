<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!--valocity模板解析-->
    #parse("sys/header.html")

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.3/vue.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        .mid_box {
            width: 1100px;
            /*margin: 0px auto;*/
            border: 1px solid rgba(34, 36, 38, .15);
            box-shadow: 0 2px 4px 0 rgba(34, 36, 38, .12), 0 2px 10px 0 rgba(34, 36, 38, .15);
            padding: 1em;
            font-size: 14px;
            position: absolute
        }

        .pd_box {
            padding: 10px;
            border: 1px solid #ddd;
            float: left;
            width: 100%
        }

        .pd-bt-10 {
            padding-bottom: 10px;

        }

        .tx-id-2 {
            text-indent: 2em
        }
    </style>
</head>

<body>
    <div class="mid_box" id="app22">
        <div class="column pd_box">
                <div class="row">
                        <div class="col-md-4">还款用户:{{loan.customerUserName}}</div>
                        <div class="col-md-4">放款用户：{{loan.creditorUserName}}</div>
                        <div class="col-md-4">贷款状态：{{loan.loanState}}</div>
                </div>
                <div class="row">
                        <div class="col-md-4">本金：{{loan.loanMoney}}元</div>
                        <div class="col-md-4">产生滞纳金:{{loan.overdueFine}}元</div>
                        <div class="col-md-4">产生利息：{{loan.lixiMoney}}元</div>
                </div>
            <div class="row">
                <div class="col-md-4">还款本金：{{loan.repayMoney}}元</div>
                <div class="col-md-4">还款滞纳金：{{loan.repayOverdueFine}}元</div>
                <div class="col-md-4">还款利息：{{loan.repayLixi}}元</div>
            </div>
                <div class="row">
                        <div class="col-md-4">结算金额：{{loan.settleMoney}}元</div>
                        <div class="col-md-4">盈利：{{loan.profit}}元</div>
                        <div class="col-md-4">时间:{{loan.applyDate}}</div>
                </div>

        </div>
        <div class="column pd_box" style="margin-top:10px">
                <div class="row pd-bt-10">
                        <div class="col-md-4">
                                <button class="btn btn-success" @click="settle"> 结算</button>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary" @click="goback"> 返回</button>
                            </div>
                </div>
        </div>
    </div>

</body>

</html>
<script>
    var vm=new Vue({
       el:"#app22",
        data:{
          loanId:$loanId,
            loan:{}
        },
        mounted:function () {
            let that =this;
            $.ajax({
                type:'get',
                url:baseUrl+"finance/loanInfo",
                data:{'loanId':this.loanId},
                dataType:'json',
                success: function(result){
                    if(result.code==0){
                        that.loan = result.loan;
                    }
                    else{
                        alert('无法获取')
                    }
                }
            });
        },
        methods:{
           goback:function(){
             self.location.href=baseUrl+"platform/credit/checkLoan.html";
           },
            settle:function(){
                $.post(baseUrl+"platform/credit/settleLoan",{loanId:this.loanId},function(data){
                    if (data.code==0){
                        alert("结算中...");
                        self.location.href=baseUrl+"platform/credit/checkLoan.html";
                    }else {
                        alert(data.msg);
                    }
                },'json');
            }
        }
    });
</script>