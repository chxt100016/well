<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.wella.houtai.login.mapper.LoginMapper">
	<!-- 获取商品分类目录信息 (API) -->
	<select id="getMenuList" parameterType="java.util.Map"
		resultType="java.util.Map">
		<choose>
			<when test="adminLevel==1">
				<if test = "parentId!=null">SELECT * FROM wa_menu WHERE parent_id = #{parentId} order by order_num</if>
				<if test = "parentId==null">SELECT * FROM wa_menu WHERE parent_id = 0 order by order_num</if>
						
			</when>
			<when test="parentId!=null">
				SELECT * FROM wa_menu WHERE parent_id = #{parentId} and
						menu_id in (${permission}) order by order_num							
			</when>			
			<otherwise>
				SELECT * FROM wa_menu WHERE parent_id = 0 and
						menu_id in (${permission}) order by order_num				
			</otherwise>
		</choose>
	</select>
	<select id="getMenuByUser" parameterType="java.util.Map"
		resultType="java.util.Map">
		SELECT GROUP_CONCAT(CAST( menu_id AS CHAR )) as menu FROM wa_menu WHERE
		user_type = #{userType}
	</select>

</mapper>