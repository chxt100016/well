<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.wella.dao.LogisticsInfoDao">


    <insert id="createLogisticsInfo" parameterType="org.wella.entity.LogisticsInfo">
        INSERT INTO wa_logistics_info
        SET order_id = #{orderId},
            from_address = #{fromAddress},
            to_address = #{toAddress},
            num = #{number},
            pre_payment = #{prePayment},
            state = #{state},
            order_date = #{orderDate},
            deliver_date = #{deliverDate},
            prod_id = #{prodId},
            prod_name = #{prodName},
            seller_user_name = #{sellerUserName},
            seller_user_id = #{sellerUserId},
            customer_user_name = #{customerUserName},
            customer_user_id = #{customerUserId}
    </insert>

    <select id="findLogisticsInfos" parameterType="java.util.Map" resultType="org.wella.entity.LogisticsInfo">
        SELECT * from wa_logistics_info
        <where>
            <if test = "orderId != null" >
                AND order_id = #{orderId}
            </if>
            <if test = "logistics != null" >
                AND logistics_id = #{logisticsId}
            </if>
            <if test = "userName != null">
                AND (customer_user_name LIKE '%${userName}%' OR seller_user_name LIKE '%${userName}%')
            </if>
        </where>
        ORDER BY order_date DESC
        <if test="start !=null and size !=null">
        LIMIT ${start} , ${size}
        </if>
    </select>

    <select id="findLogisticsInfosCount" parameterType="java.util.Map" resultType="int">
        SELECT count(*) from wa_logistics_info
        <where>
            <if test = "orderId != null" >
                AND order_id = #{orderId}
            </if>
            <if test = "userName != null">
                AND (customer_user_name LIKE '%${userName}%' OR seller_user_name LIKE '%${userName}%')
            </if>
        </where>
    </select>

    <select id="findLogisticsInfo" parameterType="java.util.Map" resultType="org.wella.entity.LogisticsInfo">
        SELECT * FROM wa_logistics_info
        <where>
            <if test = "logisticsId != null" >
                AND logistics_id = #{logisticsId}
            </if>
        </where>
    </select>
</mapper>